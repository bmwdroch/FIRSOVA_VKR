{% extends 'base.html' %}

{% block title %}Прогнозирование оттока клиентов | Результаты{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0">Результаты прогноза</h3>
            </div>
            <div class="card-body">
                <div class="result-box">
                    <div class="row">
                        <div class="col-md-8">
                            <h4>Прогноз оттока клиента:</h4>
                            <h2 class="{% if 'Да' in prediction %}text-danger{% else %}text-success{% endif %}">{{ prediction }}</h2>
                            <p class="lead">Вероятность оттока: <strong>{{ probability }}</strong></p>
                        </div>
                        <div class="col-md-4 text-center">
                            <div class="display-1 {% if 'Да' in prediction %}text-danger{% else %}text-success{% endif %}">
                                <i class="{% if 'Да' in prediction %}bi bi-exclamation-triangle-fill{% else %}bi bi-check-circle-fill{% endif %}"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <h4 class="mt-4">Данные клиента</h4>
                
                <!-- Демографические данные -->
                <div class="form-section">
                    <h5>Демографические данные</h5>
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <strong>Пол:</strong> {{ client_data.gender }}
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Пожилой гражданин:</strong> {% if client_data.SeniorCitizen == 1 %}Да{% else %}Нет{% endif %}
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Партнер:</strong> {{ client_data.Partner }}
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Иждивенцы:</strong> {{ client_data.Dependents }}
                        </div>
                    </div>
                </div>
                
                <!-- Данные об услугах -->
                <div class="form-section">
                    <h5>Данные об услугах</h5>
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <strong>Срок обслуживания:</strong> {{ client_data.tenure }} мес.
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Телефонные услуги:</strong> {{ client_data.PhoneService }}
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Несколько линий:</strong> {{ client_data.MultipleLines }}
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Интернет-услуга:</strong> {{ client_data.InternetService }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <strong>Онлайн-безопасность:</strong> {{ client_data.OnlineSecurity }}
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Онлайн-резервирование:</strong> {{ client_data.OnlineBackup }}
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Защита устройства:</strong> {{ client_data.DeviceProtection }}
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Тех. поддержка:</strong> {{ client_data.TechSupport }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <strong>Потоковое ТВ:</strong> {{ client_data.StreamingTV }}
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Потоковое видео:</strong> {{ client_data.StreamingMovies }}
                        </div>
                    </div>
                </div>
                
                <!-- Данные о контракте -->
                <div class="form-section">
                    <h5>Данные о контракте</h5>
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <strong>Тип контракта:</strong> {{ client_data.Contract }}
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Безбумажный расчет:</strong> {{ client_data.PaperlessBilling }}
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Способ оплаты:</strong> {{ client_data.PaymentMethod }}
                        </div>
                        <div class="col-md-3 mb-2">
                            <strong>Ежемесячная плата:</strong> ${{ client_data.MonthlyCharges }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <strong>Общие расходы:</strong> ${{ client_data.TotalCharges }}
                        </div>
                    </div>
                </div>
                
                <div class="d-grid gap-2 mt-4">
                    <a href="/" class="btn btn-primary">Вернуться на главную</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 